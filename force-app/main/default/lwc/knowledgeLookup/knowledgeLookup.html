<template>
  <div class="slds-form-element">
    <div class="slds-form-element__control">
      <div class="slds-combobox_container">
        <div
          class="
            slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click
          "
          aria-expanded="false"
          aria-haspopup="listbox"
          role="combobox"
        >
          <div
            class="
              slds-combobox__form-element
              slds-input-has-icon slds-input-has-icon_right
            " style="width:96%"
            role="none"
          >
            <input
              type="text"
              class="slds-input slds-combobox__input"
              id="combobox-id-1"
              aria-autocomplete="list"
              aria-controls="listbox-id-1"
              autocomplete="off"
              role="textbox"
              placeholder="Search Library"
              onkeyup={handleSearch}
            />
            <span
              class="
                slds-icon_container
                slds-icon-utility-search
                slds-input__icon slds-input__icon_right
              "
            >
              <lightning-icon
                icon-name="utility:search"
                size="xx-small"
              ></lightning-icon>
            </span>
          </div>
          <div
            class="
              slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid
            "
            role="listbox"
          >
            <ul class="slds-listbox slds-listbox_vertical" role="presentation">
              <template
                if:true={searchedArticles}
                for:each={searchedArticles}
                for:item="article"
                for:index="index"
              >
                <li
                  role="presentation"
                  class="slds-listbox__item"
                  key={article.Parent.Id}
                  data-articleid={article.Parent.Id}
                  data-categoryname={article.DataCategoryName}
                  onclick={handleArticleClick}
                >
                  <div
                    class="
                      slds-media
                      slds-listbox__option
                      slds-listbox__option_entity
                      slds-listbox__option_has-meta
                    "
                    role="option"
                  >
                    <span class="slds-media__figure slds-listbox__option-icon">
                      <span
                        class="slds-icon_container slds-icon-standard-account"
                      >
                        <lightning-icon
                          icon-name="standard:knowledge"
                        ></lightning-icon>
                      </span>
                    </span>
                    <span class="slds-media__body">
                      <span
                        class="
                          slds-listbox__option-text
                          slds-listbox__option-text_entity
                        "
                      >
                        {article.DataCategoryName}</span
                      >
                      <span
                        class="
                          slds-listbox__option-meta
                          slds-listbox__option-meta_entity
                        "
                        >{article.Parent.Title}</span
                      >
                    </span>
                  </div>
                </li>
              </template>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
